{"ast":null,"code":"var _jsxFileName = \"D:\\\\sem2\\\\Hobby Project\\\\client\\\\src\\\\pages\\\\Upload.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Upload = () => {\n  _s();\n  const [artwork, setArtwork] = useState({\n    title: '',\n    description: '',\n    price: '',\n    imageUrl: ''\n  });\n  const [token, setToken] = useState(null);\n  const [role, setRole] = useState('');\n  const [message, setMessage] = useState('');\n  const [isArtist, setIsArtist] = useState(false);\n  useEffect(() => {\n    const storedToken = localStorage.getItem('token');\n    setToken(storedToken);\n    if (storedToken) {\n      try {\n        const payload = JSON.parse(atob(storedToken.split('.')[1]));\n        const userRole = payload.role;\n        setRole(userRole);\n        setIsArtist(userRole === 'artist');\n      } catch (err) {\n        console.error('Invalid token:', err);\n        setMessage('Invalid token. Please log in again.');\n      }\n    } else {\n      setMessage('You must be logged in to upload artwork.');\n    }\n  }, []);\n  const handleChange = e => {\n    setArtwork({\n      ...artwork,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleUpload = async () => {\n    if (!isArtist) {\n      setMessage('Only artists are allowed to upload artwork.');\n      return;\n    }\n    try {\n      const res = await axios.post('http://localhost:5000/api/artworks', artwork, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setMessage(res.data.message || 'Artwork uploaded successfully!');\n      setArtwork({\n        title: '',\n        description: '',\n        price: '',\n        imageUrl: ''\n      });\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(err);\n      setMessage(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Upload failed. Please try again.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: styles.heading,\n      children: \"Upload Artwork\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), !token ? /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles.error,\n      children: \"Please login to upload artwork.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this) : !isArtist ? /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles.error,\n      children: \"Access denied. Only artists can upload artwork.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"title\",\n        placeholder: \"Title\",\n        value: artwork.title,\n        onChange: handleChange,\n        style: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"description\",\n        placeholder: \"Description\",\n        value: artwork.description,\n        onChange: handleChange,\n        style: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"price\",\n        placeholder: \"Price\",\n        value: artwork.price,\n        onChange: handleChange,\n        style: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"imageUrl\",\n        placeholder: \"Image URL\",\n        value: artwork.imageUrl,\n        onChange: handleChange,\n        style: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUpload,\n        style: styles.button,\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles.message,\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(Upload, \"sqfA2Oe2zdiIIykxAxfMt/fCz20=\");\n_c = Upload;\nconst styles = {\n  container: {\n    maxWidth: '500px',\n    margin: '40px auto',\n    padding: '20px',\n    borderRadius: '12px',\n    boxShadow: '0 0 15px rgba(0, 0, 0, 0.2)',\n    background: '#fff'\n  },\n  heading: {\n    textAlign: 'center',\n    marginBottom: '20px'\n  },\n  input: {\n    width: '100%',\n    padding: '10px',\n    margin: '10px 0',\n    border: '1px solid #ccc',\n    borderRadius: '8px'\n  },\n  button: {\n    width: '100%',\n    padding: '12px',\n    background: '#4caf50',\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    cursor: 'pointer',\n    fontWeight: 'bold'\n  },\n  error: {\n    color: 'red',\n    textAlign: 'center',\n    fontWeight: 'bold'\n  },\n  message: {\n    marginTop: '20px',\n    textAlign: 'center',\n    fontWeight: '600',\n    color: 'green'\n  }\n};\nexport default Upload;\nvar _c;\n$RefreshReg$(_c, \"Upload\");","map":{"version":3,"names":["React","useEffect","useState","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","Upload","_s","artwork","setArtwork","title","description","price","imageUrl","token","setToken","role","setRole","message","setMessage","isArtist","setIsArtist","storedToken","localStorage","getItem","payload","JSON","parse","atob","split","userRole","err","console","error","handleChange","e","target","name","value","handleUpload","res","post","headers","Authorization","data","_err$response","_err$response$data","response","style","styles","container","children","heading","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","input","onClick","button","_c","maxWidth","margin","padding","borderRadius","boxShadow","background","textAlign","marginBottom","width","border","color","cursor","fontWeight","marginTop","$RefreshReg$"],"sources":["D:/sem2/Hobby Project/client/src/pages/Upload.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Upload = () => {\r\n  const [artwork, setArtwork] = useState({\r\n    title: '',\r\n    description: '',\r\n    price: '',\r\n    imageUrl: '',\r\n  });\r\n\r\n  const [token, setToken] = useState(null);\r\n  const [role, setRole] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const [isArtist, setIsArtist] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const storedToken = localStorage.getItem('token');\r\n    setToken(storedToken);\r\n\r\n    if (storedToken) {\r\n      try {\r\n        const payload = JSON.parse(atob(storedToken.split('.')[1]));\r\n        const userRole = payload.role;\r\n        setRole(userRole);\r\n        setIsArtist(userRole === 'artist');\r\n      } catch (err) {\r\n        console.error('Invalid token:', err);\r\n        setMessage('Invalid token. Please log in again.');\r\n      }\r\n    } else {\r\n      setMessage('You must be logged in to upload artwork.');\r\n    }\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setArtwork({ ...artwork, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    if (!isArtist) {\r\n      setMessage('Only artists are allowed to upload artwork.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await axios.post('http://localhost:5000/api/artworks', artwork, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      setMessage(res.data.message || 'Artwork uploaded successfully!');\r\n      setArtwork({ title: '', description: '', price: '', imageUrl: '' });\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage(\r\n        err.response?.data?.message || 'Upload failed. Please try again.'\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <h2 style={styles.heading}>Upload Artwork</h2>\r\n\r\n      {!token ? (\r\n        <p style={styles.error}>Please login to upload artwork.</p>\r\n      ) : !isArtist ? (\r\n        <p style={styles.error}>Access denied. Only artists can upload artwork.</p>\r\n      ) : (\r\n        <>\r\n          <input\r\n            type=\"text\"\r\n            name=\"title\"\r\n            placeholder=\"Title\"\r\n            value={artwork.title}\r\n            onChange={handleChange}\r\n            style={styles.input}\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            name=\"description\"\r\n            placeholder=\"Description\"\r\n            value={artwork.description}\r\n            onChange={handleChange}\r\n            style={styles.input}\r\n          />\r\n          <input\r\n            type=\"number\"\r\n            name=\"price\"\r\n            placeholder=\"Price\"\r\n            value={artwork.price}\r\n            onChange={handleChange}\r\n            style={styles.input}\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            name=\"imageUrl\"\r\n            placeholder=\"Image URL\"\r\n            value={artwork.imageUrl}\r\n            onChange={handleChange}\r\n            style={styles.input}\r\n          />\r\n          <button onClick={handleUpload} style={styles.button}>\r\n            Upload\r\n          </button>\r\n        </>\r\n      )}\r\n\r\n      {message && <p style={styles.message}>{message}</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    maxWidth: '500px',\r\n    margin: '40px auto',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    boxShadow: '0 0 15px rgba(0, 0, 0, 0.2)',\r\n    background: '#fff',\r\n  },\r\n  heading: {\r\n    textAlign: 'center',\r\n    marginBottom: '20px',\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '10px',\r\n    margin: '10px 0',\r\n    border: '1px solid #ccc',\r\n    borderRadius: '8px',\r\n  },\r\n  button: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    background: '#4caf50',\r\n    color: 'white',\r\n    border: 'none',\r\n    borderRadius: '8px',\r\n    cursor: 'pointer',\r\n    fontWeight: 'bold',\r\n  },\r\n  error: {\r\n    color: 'red',\r\n    textAlign: 'center',\r\n    fontWeight: 'bold',\r\n  },\r\n  message: {\r\n    marginTop: '20px',\r\n    textAlign: 'center',\r\n    fontWeight: '600',\r\n    color: 'green',\r\n  },\r\n};\r\n\r\nexport default Upload;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
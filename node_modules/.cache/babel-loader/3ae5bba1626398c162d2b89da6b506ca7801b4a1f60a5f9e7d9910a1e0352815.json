{"ast":null,"code":"var _jsxFileName = \"D:\\\\sem2\\\\Hobby Project\\\\client\\\\src\\\\pages\\\\Upload.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Upload = () => {\n  _s();\n  const [artwork, setArtwork] = useState({\n    title: '',\n    description: '',\n    price: '',\n    imageUrl: ''\n  });\n  const [token, setToken] = useState('');\n  const [isArtist, setIsArtist] = useState(false);\n  const [message, setMessage] = useState('');\n\n  // Decode JWT and check role\n  useEffect(() => {\n    const storedToken = localStorage.getItem('token');\n    if (!storedToken) {\n      setMessage('You must be logged in to upload artwork.');\n      return;\n    }\n    try {\n      const payload = JSON.parse(atob(storedToken.split('.')[1]));\n      if (payload.role === 'artist') {\n        setIsArtist(true);\n        setToken(storedToken);\n      } else {\n        setIsArtist(false);\n        setMessage('Only artists are allowed to upload artwork.');\n      }\n    } catch (err) {\n      console.error('Token decode error:', err);\n      setMessage('Invalid session. Please login again.');\n    }\n  }, []);\n  const handleChange = e => {\n    setArtwork({\n      ...artwork,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleUpload = async () => {\n    try {\n      const res = await axios.post('http://localhost:5000/api/artworks', artwork, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setMessage(res.data.message || 'Artwork uploaded successfully.');\n      setArtwork({\n        title: '',\n        description: '',\n        price: '',\n        imageUrl: ''\n      });\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Upload error:', err);\n      setMessage(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Upload failed.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: styles.heading,\n      children: \"Upload Artwork\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), !isArtist ? /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles.error,\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"title\",\n        placeholder: \"Title\",\n        value: artwork.title,\n        onChange: handleChange,\n        style: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"description\",\n        placeholder: \"Description\",\n        value: artwork.description,\n        onChange: handleChange,\n        style: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"price\",\n        placeholder: \"Price\",\n        value: artwork.price,\n        onChange: handleChange,\n        style: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"imageUrl\",\n        placeholder: \"Image URL\",\n        value: artwork.imageUrl,\n        onChange: handleChange,\n        style: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUpload,\n        style: styles.button,\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles.message,\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n_s(Upload, \"iB+qHTmdcRqDYSApoGJ26fRddXc=\");\n_c = Upload;\nconst styles = {\n  container: {\n    maxWidth: '500px',\n    margin: '40px auto',\n    padding: '20px',\n    borderRadius: '12px',\n    boxShadow: '0 0 15px rgba(0, 0, 0, 0.1)',\n    background: '#fff'\n  },\n  heading: {\n    textAlign: 'center',\n    marginBottom: '20px',\n    fontSize: '24px',\n    color: '#333'\n  },\n  input: {\n    width: '100%',\n    padding: '10px',\n    marginBottom: '10px',\n    borderRadius: '8px',\n    border: '1px solid #ccc'\n  },\n  button: {\n    width: '100%',\n    padding: '12px',\n    backgroundColor: '#4caf50',\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    cursor: 'pointer',\n    fontWeight: 'bold',\n    fontSize: '16px'\n  },\n  error: {\n    color: 'red',\n    fontWeight: 'bold',\n    textAlign: 'center'\n  },\n  message: {\n    marginTop: '20px',\n    textAlign: 'center',\n    fontWeight: '600',\n    color: 'green'\n  }\n};\nexport default Upload;\nvar _c;\n$RefreshReg$(_c, \"Upload\");","map":{"version":3,"names":["React","useEffect","useState","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","Upload","_s","artwork","setArtwork","title","description","price","imageUrl","token","setToken","isArtist","setIsArtist","message","setMessage","storedToken","localStorage","getItem","payload","JSON","parse","atob","split","role","err","console","error","handleChange","e","target","name","value","handleUpload","res","post","headers","Authorization","data","_err$response","_err$response$data","response","style","styles","container","children","heading","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","input","onClick","button","_c","maxWidth","margin","padding","borderRadius","boxShadow","background","textAlign","marginBottom","fontSize","color","width","border","backgroundColor","cursor","fontWeight","marginTop","$RefreshReg$"],"sources":["D:/sem2/Hobby Project/client/src/pages/Upload.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Upload = () => {\r\n  const [artwork, setArtwork] = useState({\r\n    title: '',\r\n    description: '',\r\n    price: '',\r\n    imageUrl: '',\r\n  });\r\n\r\n  const [token, setToken] = useState('');\r\n  const [isArtist, setIsArtist] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n\r\n  // Decode JWT and check role\r\n  useEffect(() => {\r\n    const storedToken = localStorage.getItem('token');\r\n    if (!storedToken) {\r\n      setMessage('You must be logged in to upload artwork.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const payload = JSON.parse(atob(storedToken.split('.')[1]));\r\n      if (payload.role === 'artist') {\r\n        setIsArtist(true);\r\n        setToken(storedToken);\r\n      } else {\r\n        setIsArtist(false);\r\n        setMessage('Only artists are allowed to upload artwork.');\r\n      }\r\n    } catch (err) {\r\n      console.error('Token decode error:', err);\r\n      setMessage('Invalid session. Please login again.');\r\n    }\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setArtwork({ ...artwork, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    try {\r\n      const res = await axios.post(\r\n        'http://localhost:5000/api/artworks',\r\n        artwork,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n      setMessage(res.data.message || 'Artwork uploaded successfully.');\r\n      setArtwork({ title: '', description: '', price: '', imageUrl: '' });\r\n    } catch (err) {\r\n      console.error('Upload error:', err);\r\n      setMessage(err.response?.data?.message || 'Upload failed.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <h2 style={styles.heading}>Upload Artwork</h2>\r\n\r\n      {!isArtist ? (\r\n        <p style={styles.error}>{message}</p>\r\n      ) : (\r\n        <>\r\n          <input\r\n            type=\"text\"\r\n            name=\"title\"\r\n            placeholder=\"Title\"\r\n            value={artwork.title}\r\n            onChange={handleChange}\r\n            style={styles.input}\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            name=\"description\"\r\n            placeholder=\"Description\"\r\n            value={artwork.description}\r\n            onChange={handleChange}\r\n            style={styles.input}\r\n          />\r\n          <input\r\n            type=\"number\"\r\n            name=\"price\"\r\n            placeholder=\"Price\"\r\n            value={artwork.price}\r\n            onChange={handleChange}\r\n            style={styles.input}\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            name=\"imageUrl\"\r\n            placeholder=\"Image URL\"\r\n            value={artwork.imageUrl}\r\n            onChange={handleChange}\r\n            style={styles.input}\r\n          />\r\n          <button onClick={handleUpload} style={styles.button}>\r\n            Upload\r\n          </button>\r\n        </>\r\n      )}\r\n\r\n      {message && <p style={styles.message}>{message}</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    maxWidth: '500px',\r\n    margin: '40px auto',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    boxShadow: '0 0 15px rgba(0, 0, 0, 0.1)',\r\n    background: '#fff',\r\n  },\r\n  heading: {\r\n    textAlign: 'center',\r\n    marginBottom: '20px',\r\n    fontSize: '24px',\r\n    color: '#333',\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '10px',\r\n    marginBottom: '10px',\r\n    borderRadius: '8px',\r\n    border: '1px solid #ccc',\r\n  },\r\n  button: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    backgroundColor: '#4caf50',\r\n    color: 'white',\r\n    border: 'none',\r\n    borderRadius: '8px',\r\n    cursor: 'pointer',\r\n    fontWeight: 'bold',\r\n    fontSize: '16px',\r\n  },\r\n  error: {\r\n    color: 'red',\r\n    fontWeight: 'bold',\r\n    textAlign: 'center',\r\n  },\r\n  message: {\r\n    marginTop: '20px',\r\n    textAlign: 'center',\r\n    fontWeight: '600',\r\n    color: 'green',\r\n  },\r\n};\r\n\r\nexport default Upload;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"D:\\\\sem2\\\\Hobby Project\\\\client\\\\src\\\\pages\\\\Upload.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Upload = () => {\n  _s();\n  const [artwork, setArtwork] = useState({\n    title: '',\n    description: '',\n    price: '',\n    imageUrl: ''\n  });\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isArtist, setIsArtist] = useState(false);\n  const [uploadMessage, setUploadMessage] = useState('');\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      setIsLoggedIn(false);\n      setIsArtist(false);\n      return;\n    }\n    try {\n      const decoded = JSON.parse(atob(token.split('.')[1]));\n      setIsLoggedIn(true);\n      setIsArtist(decoded.role === 'artist');\n    } catch (err) {\n      console.error('Invalid token:', err);\n      setIsLoggedIn(false);\n      setIsArtist(false);\n    }\n  }, []);\n  const handleChange = e => {\n    setArtwork({\n      ...artwork,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleUpload = async () => {\n    const token = localStorage.getItem('token');\n    if (!token || !isArtist) {\n      setUploadMessage('You must be logged in as an artist to upload.');\n      return;\n    }\n    try {\n      const response = await axios.post('http://localhost:5000/api/artworks', artwork, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setUploadMessage(response.data.message || 'Artwork uploaded successfully!');\n      setArtwork({\n        title: '',\n        description: '',\n        price: '',\n        imageUrl: ''\n      });\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Upload failed:', err);\n      setUploadMessage(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Upload failed. Please try again.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: styles.heading,\n      children: \"Upload Artwork\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), !isLoggedIn ? /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles.warning,\n      children: \"You must be logged in to upload artwork.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this) : !isArtist ? /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles.warning,\n      children: \"Only artists can upload artworks.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"title\",\n        placeholder: \"Title\",\n        value: artwork.title,\n        onChange: handleChange,\n        style: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"description\",\n        placeholder: \"Description\",\n        value: artwork.description,\n        onChange: handleChange,\n        style: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"price\",\n        placeholder: \"Price\",\n        value: artwork.price,\n        onChange: handleChange,\n        style: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"imageUrl\",\n        placeholder: \"Image URL\",\n        value: artwork.imageUrl,\n        onChange: handleChange,\n        style: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUpload,\n        style: styles.button,\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this), uploadMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: styles.message,\n        children: uploadMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_s(Upload, \"sMa+XAYN85w0oco9W2DyMasKLxQ=\");\n_c = Upload;\nconst styles = {\n  container: {\n    maxWidth: '500px',\n    margin: '40px auto',\n    padding: '20px',\n    borderRadius: '12px',\n    boxShadow: '0 0 15px rgba(0, 0, 0, 0.2)',\n    background: '#fff'\n  },\n  heading: {\n    textAlign: 'center',\n    marginBottom: '20px'\n  },\n  input: {\n    width: '100%',\n    padding: '10px',\n    margin: '10px 0',\n    border: '1px solid #ccc',\n    borderRadius: '8px'\n  },\n  button: {\n    width: '100%',\n    padding: '12px',\n    background: '#4caf50',\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    cursor: 'pointer',\n    fontWeight: 'bold'\n  },\n  warning: {\n    color: 'red',\n    fontWeight: 'bold',\n    textAlign: 'center'\n  },\n  message: {\n    marginTop: '15px',\n    textAlign: 'center',\n    color: 'green',\n    fontWeight: '600'\n  }\n};\nexport default Upload;\nvar _c;\n$RefreshReg$(_c, \"Upload\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","Upload","_s","artwork","setArtwork","title","description","price","imageUrl","isLoggedIn","setIsLoggedIn","isArtist","setIsArtist","uploadMessage","setUploadMessage","token","localStorage","getItem","decoded","JSON","parse","atob","split","role","err","console","error","handleChange","e","target","name","value","handleUpload","response","post","headers","Authorization","data","message","_err$response","_err$response$data","style","styles","container","children","heading","fileName","_jsxFileName","lineNumber","columnNumber","warning","type","placeholder","onChange","input","onClick","button","_c","maxWidth","margin","padding","borderRadius","boxShadow","background","textAlign","marginBottom","width","border","color","cursor","fontWeight","marginTop","$RefreshReg$"],"sources":["D:/sem2/Hobby Project/client/src/pages/Upload.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Upload = () => {\r\n  const [artwork, setArtwork] = useState({\r\n    title: '',\r\n    description: '',\r\n    price: '',\r\n    imageUrl: '',\r\n  });\r\n\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [isArtist, setIsArtist] = useState(false);\r\n  const [uploadMessage, setUploadMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      setIsLoggedIn(false);\r\n      setIsArtist(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const decoded = JSON.parse(atob(token.split('.')[1]));\r\n      setIsLoggedIn(true);\r\n      setIsArtist(decoded.role === 'artist');\r\n    } catch (err) {\r\n      console.error('Invalid token:', err);\r\n      setIsLoggedIn(false);\r\n      setIsArtist(false);\r\n    }\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setArtwork({ ...artwork, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token || !isArtist) {\r\n      setUploadMessage('You must be logged in as an artist to upload.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        'http://localhost:5000/api/artworks',\r\n        artwork,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n      setUploadMessage(response.data.message || 'Artwork uploaded successfully!');\r\n      setArtwork({ title: '', description: '', price: '', imageUrl: '' });\r\n    } catch (err) {\r\n      console.error('Upload failed:', err);\r\n      setUploadMessage(\r\n        err.response?.data?.message || 'Upload failed. Please try again.'\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <h2 style={styles.heading}>Upload Artwork</h2>\r\n\r\n      {!isLoggedIn ? (\r\n        <p style={styles.warning}>You must be logged in to upload artwork.</p>\r\n      ) : !isArtist ? (\r\n        <p style={styles.warning}>Only artists can upload artworks.</p>\r\n      ) : (\r\n        <>\r\n          <input\r\n            type=\"text\"\r\n            name=\"title\"\r\n            placeholder=\"Title\"\r\n            value={artwork.title}\r\n            onChange={handleChange}\r\n            style={styles.input}\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            name=\"description\"\r\n            placeholder=\"Description\"\r\n            value={artwork.description}\r\n            onChange={handleChange}\r\n            style={styles.input}\r\n          />\r\n          <input\r\n            type=\"number\"\r\n            name=\"price\"\r\n            placeholder=\"Price\"\r\n            value={artwork.price}\r\n            onChange={handleChange}\r\n            style={styles.input}\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            name=\"imageUrl\"\r\n            placeholder=\"Image URL\"\r\n            value={artwork.imageUrl}\r\n            onChange={handleChange}\r\n            style={styles.input}\r\n          />\r\n          <button onClick={handleUpload} style={styles.button}>\r\n            Upload\r\n          </button>\r\n          {uploadMessage && <p style={styles.message}>{uploadMessage}</p>}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    maxWidth: '500px',\r\n    margin: '40px auto',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    boxShadow: '0 0 15px rgba(0, 0, 0, 0.2)',\r\n    background: '#fff',\r\n  },\r\n  heading: {\r\n    textAlign: 'center',\r\n    marginBottom: '20px',\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '10px',\r\n    margin: '10px 0',\r\n    border: '1px solid #ccc',\r\n    borderRadius: '8px',\r\n  },\r\n  button: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    background: '#4caf50',\r\n    color: 'white',\r\n    border: 'none',\r\n    borderRadius: '8px',\r\n    cursor: 'pointer',\r\n    fontWeight: 'bold',\r\n  },\r\n  warning: {\r\n    color: 'red',\r\n    fontWeight: 'bold',\r\n    textAlign: 'center',\r\n  },\r\n  message: {\r\n    marginTop: '15px',\r\n    textAlign: 'center',\r\n    color: 'green',\r\n    fontWeight: '600',\r\n  },\r\n};\r\n\r\nexport default Upload;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}